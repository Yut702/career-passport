# マッチング条件の説明

## 現在の実装状況

現在のシステムでは、マッチングは**手動で作成**されます。学生と企業がそれぞれ条件を設定し、マッチング API（`matchAPI.create`）を呼び出すことでマッチングが作成されます。

## 設定可能な条件

### 学生側の求人条件（`StudentJobConditions`）

以下の条件を設定できます：

1. **仕事の種類（jobType）**

   - `internship`: インターンシップ
   - `fulltime`: 正社員

2. **職種カテゴリ（positionCategory）**

   - `engineering`: エンジニア・技術系
   - `sales`: 営業・セールス
   - `marketing`: マーケティング
   - `design`: デザイン・クリエイティブ
   - `product`: プロダクト・企画
   - `consulting`: コンサルティング
   - `hr`: 人事・採用
   - `finance`: 経理・財務
   - `operations`: オペレーション・業務
   - `customer`: カスタマーサクセス・サポート
   - `other`: その他

3. **具体的な職種（position）**

   - 選択した職種カテゴリに応じた職種リストから選択

4. **勤務地（location）**

   - テキスト入力（例: "東京都"、"リモート可"）

5. **業界（industry）**

   - `it`: IT・ソフトウェア
   - `finance`: 金融・保険
   - `consulting`: コンサルティング
   - `manufacturing`: 製造業
   - `retail`: 小売・流通
   - `service`: サービス業
   - `media`: メディア・広告
   - `education`: 教育
   - `healthcare`: 医療・ヘルスケア
   - `realestate`: 不動産
   - `construction`: 建設・建築
   - `logistics`: 物流・運輸
   - `food`: 食品・飲料
   - `fashion`: ファッション・アパレル
   - `entertainment`: エンターテイメント
   - `other`: その他

6. **希望給与（salary）**

   - `200万円未満`
   - `200万円〜300万円`
   - `300万円〜400万円`
   - `400万円〜500万円`
   - `500万円〜600万円`
   - `600万円〜700万円`
   - `700万円〜800万円`
   - `800万円〜1000万円`
   - `1000万円以上`
   - `応相談`

7. **働き方（workStyle）**

   - `remote`: リモート
   - `hybrid`: ハイブリッド
   - `office`: オフィス

8. **希望スキル（skills）**
   - 選択した職種カテゴリに応じたスキルリストから複数選択

### 企業側の採用条件（`OrgRecruitmentConditions`）

以下の条件を設定できます：

1. **仕事の種類（jobType）**

   - `internship`: インターンシップ
   - `fulltime`: 正社員

2. **職種カテゴリ（positionCategory）**

   - 学生側と同じカテゴリリスト

3. **具体的な職種（position）**

   - 選択した職種カテゴリに応じた職種リストから選択

4. **業界（industry）**

   - 学生側と同じ業界リスト

5. **必須スキル（requiredSkills）**

   - 選択した職種カテゴリに応じたスキルリストから複数選択

6. **希望スキル（preferredSkills）**

   - 選択した職種カテゴリに応じたスキルリストから複数選択

7. **勤務地（location）**

   - テキスト入力（例: "東京都"、"リモート可"）

8. **働き方（workStyle）**

   - `remote`: リモート
   - `hybrid`: ハイブリッド
   - `office`: オフィス

9. **給与（salary）**

   - 学生側と同じ給与範囲リスト

10. **説明（description）**
    - テキスト入力（採用条件の詳細説明）

## マッチング条件の考え方

現在は手動マッチングですが、将来的に自動マッチングを実装する場合、以下の条件でマッチング度を計算できます：

### 必須条件（完全一致が必要）

1. **仕事の種類（jobType）**
   - 学生の希望と企業の募集が一致している必要がある

### 重要条件（高い一致度が望ましい）

2. **職種カテゴリ（positionCategory）**

   - 完全一致: 100%
   - 不一致: 0%

3. **具体的な職種（position）**

   - 完全一致: 100%
   - 不一致: 0%

4. **業界（industry）**
   - 完全一致: 100%
   - 不一致: 0%

### 柔軟な条件（部分一致でも可）

5. **勤務地（location）**

   - 完全一致: 100%
   - 部分一致（例: "東京都" と "東京都渋谷区"）: 50%
   - 不一致: 0%

6. **働き方（workStyle）**

   - 完全一致: 100%
   - 不一致: 0%

7. **給与（salary）**

   - 学生の希望給与の下限が企業の給与範囲内: 100%
   - 学生の希望給与の上限が企業の給与範囲内: 80%
   - 範囲が重複: 50%
   - 不一致: 0%

8. **スキル（skills）**
   - 企業の必須スキルが学生の希望スキルに含まれる割合: 必須スキル数 / 学生の希望スキル数
   - 企業の希望スキルが学生の希望スキルに含まれる割合: 希望スキル数 / 学生の希望スキル数
   - 必須スキルが全て含まれている場合: 100%
   - 必須スキルが一部含まれている場合: (含まれる必須スキル数 / 必須スキル数) × 100%

## マッチングスコアの計算例

```
マッチングスコア = (
  仕事の種類一致度 × 20% +
  職種カテゴリ一致度 × 20% +
  具体的な職種一致度 × 15% +
  業界一致度 × 10% +
  勤務地一致度 × 10% +
  働き方一致度 × 10% +
  給与一致度 × 10% +
  スキル一致度 × 5%
) × 100
```

## 現在のマッチングフロー

1. 学生が求人条件を設定して保存
2. 企業が採用条件を設定して保存
3. 学生または企業が手動でマッチングを作成（`matchAPI.create`）
4. マッチングが作成されると、両者に通知される
5. 学生は ZKP 証明を添付してプライバシーを保護できる
6. 企業は学生のスタンプ、NFT、ZKP 証明を確認できる

## 今後の改善案

1. **自動マッチング機能**

   - 条件に基づいて自動的にマッチング候補を表示
   - マッチングスコアを計算して表示

2. **マッチング通知**

   - 新しいマッチング候補が見つかったときに通知

3. **条件の優先度設定**

   - 必須条件と希望条件を分けて設定できるようにする

4. **マッチング履歴**
   - 過去のマッチング履歴を保存・表示
