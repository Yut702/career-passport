# CareerPassport 実装手順書（10 日版・詳細）

## 📋 目次

1. [概要](#概要)
2. [実装方針](#実装方針)
3. [Day 1-2: UI 実装（モックデータ）](#day-1-2-ui-実装モックデータ)
4. [Day 3-4: スマートコントラクト実装](#day-3-4-スマートコントラクト実装)
5. [Day 5-6: ウォレット連携と統合](#day-5-6-ウォレット連携と統合)
6. [Day 7-8: 機能完成とテスト](#day-7-8-機能完成とテスト)
7. [Day 9-10: デモ準備](#day-9-10-デモ準備)

---

## 概要

この手順書は、**AI を活用して 10 日で実装**する CareerPassport アプリの詳細な実装ガイドです。

**実装戦略**:

- 🚀 **UI ファースト**: 先に UI を完成させ、モックデータで動作確認
- 🔗 **後から統合**: UI 完成後にブロックチェーン連携を追加
- 🤖 **AI 活用**: コード生成、デバッグ、最適化に AI を最大限活用

**実装範囲**:

- ✅ フロントエンド UI（ユーザー・企業向け）
- ✅ スマートコントラクト（NFT 発行）
- ✅ ウォレット連携（MetaMask）
- ✅ ローカルストレージでのデータ管理（一時的）

---

## 実装方針

### データ管理の方針

**Phase 1-2（Day 1-4）**: ローカルストレージのみ

- フロントエンドのみで完結
- モックデータで動作確認
- ブロックチェーン連携前の準備

**Phase 3 以降（Day 5-10）**: ブロックチェーン連携

- スタンプ発行 → ブロックチェーンに記録
- NFT 発行 → ブロックチェーンに記録
- ローカルストレージはキャッシュとして使用

---

## Day 1-2: UI 実装（モックデータ）

### 目標

すべての画面をモックデータで完成させ、UI の動作を確認する。

### 作業内容

#### ステップ 1: プロジェクト環境の確認（30 分）

**作業**:

1. リポジトリの確認

   ```bash
   git branch
   git pull origin main
   ```

2. 依存関係のインストール

   ```bash
   cd frontend
   npm install
   ```

3. 動作確認
   ```bash
   npm run dev
   ```
   ブラウザで http://localhost:5173 を開いて確認

**確認ポイント**:

- ✅ フロントエンドが起動する
- ✅ エラーが表示されない

---

#### ステップ 2: ルーティングの設定（1 時間）

**作業**:

1. `frontend/src/router.jsx` を確認・更新

   - ホーム画面: `/`
   - マイページ: `/mypage`
   - NFT 一覧: `/nfts`
   - NFT 詳細: `/nft/:id`
   - 企業ダッシュボード: `/org`
   - スタンプ発行: `/org/stamp-issuance`

2. 動作確認
   - 各ルートにアクセスしてエラーが出ないか確認

**確認ポイント**:

- ✅ すべてのルートが設定されている
- ✅ ページ遷移が動作する

---

#### ステップ 3: 共通コンポーネントの作成（2-3 時間）

**作業**:

1. **Layout コンポーネント** (`frontend/src/components/Layout.jsx`)

   - ナビゲーションバー
   - フッター（オプション）
   - 共通スタイル

2. **WalletConnect コンポーネント** (`frontend/src/components/WalletConnect.jsx`)

   - MetaMask 接続ボタン（UI のみ、機能は後で実装）

3. **StampCard コンポーネント** (`frontend/src/components/StampCard.jsx`)

   - スタンプ情報の表示

4. **NFTCard コンポーネント** (`frontend/src/components/NFTCard.jsx`)

   - NFT 情報の表示

5. **ProgressBar コンポーネント** (`frontend/src/components/ProgressBar.jsx`)
   - 進捗バーの表示

**確認ポイント**:

- ✅ コンポーネントが表示される
- ✅ スタイルが適用されている

---

#### ステップ 4: ローカルストレージ管理の実装（1-2 時間）

**作業**:

1. **ストレージ管理** (`frontend/src/lib/storage.js`)

   - スタンプの取得・保存
   - NFT の取得・保存
   - ユーザー情報の取得・保存
   - モックデータの初期化

2. **モックデータ** (`frontend/src/data/mockData.js`)
   - サンプルスタンプデータ
   - サンプル NFT データ
   - サンプルユーザーデータ

**確認ポイント**:

- ✅ ローカルストレージにデータが保存される
- ✅ モックデータが初期化される

---

#### ステップ 5: ホーム画面の実装（2-3 時間）

**作業**:

1. **ホーム画面** (`frontend/src/pages/Home.jsx`)

   - ユーザー名表示
   - スタンプ数・NFT 数の表示
   - 次の目標の表示（進捗バー）
   - 最近のスタンプ表示

2. **動作確認**
   - データが正しく表示されるか
   - 進捗バーが動作するか

**確認ポイント**:

- ✅ ホーム画面が表示される
- ✅ データが正しく表示される
- ✅ 進捗バーが動作する

---

#### ステップ 6: マイページの実装（3-4 時間）

**作業**:

1. **マイページ** (`frontend/src/pages/MyPage.jsx`)

   - 企業別スタンプ一覧
   - 進捗バー（各企業ごと）
   - NFT 交換可能な NFT の表示
   - NFT 交換ボタン（UI のみ）

2. **動作確認**
   - 企業別にスタンプが整理されるか
   - 進捗バーが正しく表示されるか

**確認ポイント**:

- ✅ 企業別スタンプ一覧が表示される
- ✅ 進捗バーが動作する
- ✅ NFT 交換条件が正しく判定される

---

#### ステップ 7: NFT 表示画面の実装（2-3 時間）

**作業**:

1. **NFT 一覧画面** (`frontend/src/pages/MyNFTs.jsx`)

   - 所有 NFT 一覧
   - レアリティ表示

2. **NFT 詳細画面** (`frontend/src/pages/NFTDetail.jsx`)
   - NFT 詳細情報
   - 取得条件表示
   - ブロックチェーン情報（後で追加）

**確認ポイント**:

- ✅ NFT 一覧が表示される
- ✅ NFT 詳細が表示される

---

#### ステップ 8: 企業向け画面の実装（2-3 時間）

**作業**:

1. **企業ダッシュボード** (`frontend/src/pages/OrgDashboard.jsx`)

   - 統計情報（スタンプ数、ユーザー数、NFT 数）
   - 最近の発行一覧

2. **スタンプ発行画面** (`frontend/src/pages/OrgStampIssuance.jsx`)
   - スタンプ発行フォーム
   - 発行ボタン（ローカルストレージに保存）

**確認ポイント**:

- ✅ ダッシュボードが表示される
- ✅ スタンプ発行が動作する

---

### Day 1-2 の成果物

- ✅ すべての画面が完成
- ✅ ローカルストレージでデータ管理
- ✅ モックデータで動作確認可能
- ✅ エラーハンドリング実装済み

---

## Day 3-4: スマートコントラクト実装

### 目標

NFT とスタンプを管理するスマートコントラクトを実装し、ローカルネットワークでテストする。

### 作業内容

#### ステップ 1: Foundry のセットアップ（1 時間）

**作業**:

1. **Foundry のインストール確認**

   ```bash
   forge --version
   ```

2. **OpenZeppelin のインストール**

   ```bash
   cd contracts
   forge install openzeppelin/openzeppelin-contracts --no-commit
   ```

3. **動作確認**
   ```bash
   forge build
   ```

**確認ポイント**:

- ✅ Foundry が動作する
- ✅ ビルドが成功する

---

#### ステップ 2: NFT コントラクトの実装（3-4 時間）

**作業**:

1. **NFT コントラクト** (`contracts/src/CareerPassportNFT.sol`)

   - ERC721 準拠
   - 譲渡不可機能
   - メタデータ管理

2. **デプロイスクリプト** (`contracts/script/DeployNFT.s.sol`)

3. **テスト** (`contracts/test/CareerPassportNFT.t.sol`)
   - NFT 発行テスト
   - 譲渡不可テスト

**確認ポイント**:

- ✅ コントラクトがビルドできる
- ✅ テストがパスする

---

#### ステップ 3: スタンプ管理コントラクトの実装（2-3 時間）

**作業**:

1. **スタンプコントラクト** (`contracts/src/StampManager.sol`)

   - スタンプ発行機能
   - スタンプ集計機能
   - NFT 交換条件判定

2. **デプロイスクリプト** (`contracts/script/DeployStamp.s.sol`)

3. **テスト** (`contracts/test/StampManager.t.sol`)

**確認ポイント**:

- ✅ コントラクトがビルドできる
- ✅ テストがパスする

---

#### ステップ 4: ローカルネットワークでのテスト（2-3 時間）

**作業**:

1. **Anvil の起動**

   ```bash
   anvil
   # 別ターミナルで実行
   ```

2. **コントラクトのデプロイ**

   ```bash
   forge script script/DeployNFT.s.sol:DeployNFT --rpc-url http://127.0.0.1:8545 --broadcast
   forge script script/DeployStamp.s.sol:DeployStamp --rpc-url http://127.0.0.1:8545 --broadcast
   ```

3. **コントラクトアドレスの保存**
   - デプロイ後に表示されるアドレスをメモ
   - `.env.local` に保存（後で使用）

**確認ポイント**:

- ✅ コントラクトがデプロイされる
- ✅ アドレスが取得できる

---

### Day 3-4 の成果物

- ✅ NFT コントラクト実装済み
- ✅ スタンプ管理コントラクト実装済み
- ✅ ローカルネットワークで動作確認済み
- ✅ コントラクトアドレス取得済み

---

## Day 5-6: ウォレット連携と統合

### 目標

MetaMask と連携し、UI からブロックチェーンを操作できるようにする。

### 作業内容

#### ステップ 1: MetaMask のセットアップ（30 分）

**作業**:

1. **MetaMask のインストール**

   - ブラウザ拡張機能としてインストール

2. **ローカルネットワークの追加**

   - ネットワーク名: `Localhost 8545`
   - RPC URL: `http://127.0.0.1:8545`
   - チェーン ID: `31337`
   - 通貨記号: `ETH`

3. **テストアカウントのインポート**
   - Anvil 起動時に表示されるプライベートキーを使用

**確認ポイント**:

- ✅ MetaMask でローカルネットワークに接続できる
- ✅ テスト ETH が表示される

---

#### ステップ 2: ウォレット接続機能の実装（2-3 時間）

**作業**:

1. **ウォレットフック** (`frontend/src/hooks/useWallet.js`)

   - MetaMask 接続
   - ウォレットアドレス取得
   - ネットワーク切り替え

2. **WalletConnect コンポーネントの更新**
   - 実際に MetaMask と接続できるようにする

**確認ポイント**:

- ✅ MetaMask と接続できる
- ✅ ウォレットアドレスが表示される

---

#### ステップ 3: コントラクト接続の実装（3-4 時間）

**作業**:

1. **コントラクト ABI の取得**

   ```bash
   cd contracts
   forge build
   # artifacts から ABI を取得
   ```

2. **コントラクト接続ライブラリ** (`frontend/src/lib/contracts.js`)

   - Ethers.js を使用してコントラクトと接続
   - NFT コントラクト接続関数
   - スタンプ管理コントラクト接続関数

3. **環境変数の設定** (`frontend/.env.local`)
   ```env
   VITE_CONTRACT_ADDRESS_NFT=0x...
   VITE_CONTRACT_ADDRESS_STAMP=0x...
   VITE_RPC_URL=http://127.0.0.1:8545
   ```

**確認ポイント**:

- ✅ コントラクトと接続できる
- ✅ コントラクトの関数を呼び出せる

---

#### ステップ 4: UI とブロックチェーンの統合（4-5 時間）

**作業**:

1. **スタンプ発行機能の統合**

   - 企業ダッシュボードからスタンプ発行
   - ブロックチェーンに記録
   - ローカルストレージにも保存（キャッシュ）

2. **NFT 交換機能の実装**

   - スタンプを集めて NFT 交換条件を確認
   - ブロックチェーンで NFT 発行
   - トランザクション確認

3. **データ同期**
   - ブロックチェーンからデータを取得
   - ローカルストレージと同期

**確認ポイント**:

- ✅ スタンプ発行がブロックチェーンに記録される
- ✅ NFT 交換が動作する
- ✅ データが正しく同期される

---

### Day 5-6 の成果物

- ✅ MetaMask 連携完了
- ✅ コントラクト接続完了
- ✅ UI からブロックチェーン操作可能
- ✅ データ同期機能実装済み

---

## Day 7-8: 機能完成とテスト

### 目標

すべての機能を完成させ、エラーハンドリングを強化する。

### 作業内容

#### ステップ 1: スタンプ発行機能の完成（2-3 時間）

**作業**:

1. **スタンプ発行フローの完成**

   - 企業がスタンプを発行
   - ブロックチェーンに記録
   - ユーザーのウォレットにスタンプが付与される

2. **エラーハンドリング**
   - トランザクション失敗時の処理
   - ネットワークエラー時の処理

**確認ポイント**:

- ✅ スタンプ発行が完全に動作する
- ✅ エラーが適切に処理される

---

#### ステップ 2: NFT 交換機能の実装（3-4 時間）

**作業**:

1. **NFT 交換フローの実装**

   - スタンプを 3 つ集める
   - NFT 交換条件を確認
   - ブロックチェーンで NFT 発行
   - トランザクション確認

2. **UI の改善**
   - 交換ボタンの動作
   - ローディング表示
   - 成功・失敗メッセージ

**確認ポイント**:

- ✅ NFT 交換が動作する
- ✅ UI が分かりやすい

---

#### ステップ 3: 統合テスト（2-3 時間）

**作業**:

1. **エンドツーエンドテスト**

   - ウォレット接続 → スタンプ表示 → NFT 発行

2. **エラーハンドリングの確認**

   - 各エラーケースのテスト

3. **バグ修正**
   - 見つかった問題を修正

**確認ポイント**:

- ✅ すべての機能が動作する
- ✅ エラーが適切に処理される

---

### Day 7-8 の成果物

- ✅ すべての機能が完成
- ✅ エラーハンドリング強化済み
- ✅ 統合テスト完了

---

## Day 9-10: デモ準備

### 目標

デモで見せる準備をし、プレゼン資料を作成する。

### 作業内容

#### ステップ 1: デモ用データの準備（2-3 時間）

**作業**:

1. **デモシナリオの作成**

   - ユーザーがスタンプを集める流れ
   - NFT 証明書を取得する流れ
   - 企業がスタンプを発行する流れ

2. **デモ用データの準備**
   - サンプルスタンプデータ
   - サンプル NFT データ

**確認ポイント**:

- ✅ デモシナリオが明確
- ✅ デモ用データが準備されている

---

#### ステップ 2: UI/UX の改善（2-3 時間）

**作業**:

1. **デザインの調整**

   - 色の調整
   - レイアウトの改善

2. **ユーザビリティの向上**
   - メッセージの改善
   - エラー表示の改善

**確認ポイント**:

- ✅ UI が分かりやすい
- ✅ 使いやすい

---

#### ステップ 3: プレゼン資料の作成（3-4 時間）

**作業**:

1. **スライドの作成**

   - アプリの概要
   - 実装した機能
   - デモの流れ

2. **スクリーンショット・動画の準備**
   - 主要画面のスクリーンショット
   - デモ動画（オプション）

**確認ポイント**:

- ✅ プレゼン資料が完成
- ✅ デモの流れが明確

---

### Day 9-10 の成果物

- ✅ デモ準備完了
- ✅ プレゼン資料完成
- ✅ UI/UX 改善完了

---

## 役割分担の提案

### 3 人での役割分担

#### メンバー A: フロントエンド UI 担当

- Day 1-2: すべての UI 実装
- Day 5-6: ウォレット連携と統合
- Day 7-8: UI の改善

#### メンバー B: スマートコントラクト担当

- Day 3-4: コントラクト実装
- Day 5-6: コントラクト接続
- Day 7-8: 機能の完成

#### メンバー C: 統合・テスト担当

- Day 1-2: UI 実装のサポート
- Day 5-6: 統合テスト
- Day 7-10: テスト・デモ準備

---

## トラブルシューティング

### よくある問題

**Q: フロントエンドが起動しない**

- `npm install` を実行
- ポートが使用中でないか確認

**Q: MetaMask が接続できない**

- ローカルネットワークが正しく設定されているか確認
- チェーン ID が 31337 になっているか確認

**Q: コントラクトが呼び出せない**

- コントラクトアドレスが正しいか確認
- ABI が正しく読み込まれているか確認
- ネットワークが一致しているか確認

---

## 📝 実装スクリプト（コマンド集）

### Day 1-2: UI 実装

```bash
# フロントエンドの起動
cd frontend
npm install
npm run dev
# ブラウザで http://localhost:5173 を開く
```

### Day 3-4: スマートコントラクト

```bash
# Foundry セットアップ
cd contracts
forge install openzeppelin/openzeppelin-contracts --no-commit

# ビルド
forge build

# テスト
forge test

# ローカルネットワークでのデプロイ
anvil  # 別ターミナル
forge script script/DeployNFT.s.sol:DeployNFT --rpc-url http://127.0.0.1:8545 --broadcast
forge script script/DeployStamp.s.sol:DeployStamp --rpc-url http://127.0.0.1:8545 --broadcast
```

### Day 5-6: ウォレット連携

```bash
# MetaMask セットアップ
# 1. MetaMask 拡張機能をインストール
# 2. ローカルネットワークを追加（RPC URL: http://127.0.0.1:8545, Chain ID: 31337）
# 3. テストアカウントをインポート（Anvil 起動時に表示されるプライベートキー）

# コントラクト ABI の取得
cd contracts
forge build
# artifacts から ABI を取得して frontend/src/abis/ に配置

# 環境変数の設定（frontend/.env.local）
# VITE_CONTRACT_ADDRESS_NFT=0x...
# VITE_CONTRACT_ADDRESS_STAMP=0x...
# VITE_RPC_URL=http://127.0.0.1:8545
```

### Day 7-10: 機能完成とデモ準備

```bash
# 動作確認
# 1. Anvil とフロントエンドを起動
# 2. ブラウザで各機能をテスト
# 3. エラーハンドリングを確認
```

---

**最終更新**: 2025 年 12 月 2 日
